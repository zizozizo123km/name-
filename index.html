<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة معدل البكالوريا</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* أنماط الجسم والخلفية */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* خلفية رمادية فاتحة */
        }
        /* أنماط رأس الصفحة */
        .header-bg {
            background-color: #e91e63; /* لون وردي لرأس الصفحة */
        }
        /* أنماط الأزرار الأساسية */
        .btn-primary {
            background-color: #673ab7; /* لون أرجواني للأزرار */
        }
        .btn-primary:hover {
            background-color: #512da8; /* لون أرجواني أغمق عند التحويم */
        }
        /* أنماط رأس الجدول */
        .table-header-bg {
            background-color: #a749b7; /* لون أرجواني أغمق لرأس الجدول */
        }
        /* إخفاء أسهم زيادة/نقصان الأرقام في حقول الإدخال */
        input[type="number"] {
            -moz-appearance: textfield; /* لمتصفح فايرفوكس */
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0; /* لمتصفحات سفاري وكروم */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- رأس الصفحة -->
    <header class="header-bg text-white p-4 flex justify-between items-center shadow-md rounded-b-lg">
        <button class="text-2xl focus:outline-none">&#9776;</button> <!-- أيقونة القائمة -->
        <div class="flex items-center space-x-2">
            <!-- تمثيل بسيط للشعار -->
            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-xl font-semibold">حاسبتي</span>
        </div>
        <div class="w-8"></div> <!-- مساحة فارغة للتناسق -->
    </header>

    <!-- منطقة المحتوى الرئيسية -->
    <main class="flex-grow container mx-auto p-4 md:p-6 lg:p-8">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden mb-6">
            <div class="p-4 header-bg text-white text-center font-bold text-lg rounded-t-lg">
                حساب معدل البكالوريا
            </div>
            <div class="p-4 text-center text-gray-700 text-sm md:text-base">
                <p>استخدم هذه الأداة البسيطة لحساب معدلك التقديري في شهادة البكالوريا. أدخل علاماتك ومعاملات المواد لتحصل على المعدل النهائي.</p>
            </div>
        </div>

        <!-- أزرار التنقل (للفروع المختلفة) -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <button class="btn-primary text-white p-3 rounded-lg shadow-md font-medium text-lg" data-branch="ادبية">حساب معدل الشعب الأدبية</button>
            <button class="btn-primary text-white p-3 rounded-lg shadow-md font-medium text-lg" data-branch="علمية">حساب معدل الشعب العلمية</button>
            <button class="btn-primary text-white p-3 rounded-lg shadow-md font-medium text-lg" data-branch="لغات">حساب معدل شعبة اللغات</button>
            <button class="btn-primary text-white p-3 rounded-lg shadow-md font-medium text-lg" data-branch="تسيير">حساب معدل شعبة التسيير والاقتصاد</button>
            <button class="btn-primary text-white p-3 rounded-lg shadow-md font-medium text-lg" data-branch="رياضيات">حساب معدل شعبة الرياضيات</button>
            <button class="btn-primary text-white p-3 rounded-lg shadow-md font-medium text-lg" data-branch="تقني">حساب معدل شعبة التقني رياضي</button>
        </div>

        <!-- قسم الحاسبة -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden p-4">
            <p class="text-center text-gray-600 mb-4 text-sm md:text-base">
                ملاحظة: يمكنك ضبط المعاملات حسب المواد التي تدرسها في شعبتك.
            </p>

            <div class="overflow-x-auto">
                <table class="w-full text-sm md:text-base text-gray-800 text-center">
                    <thead>
                        <tr class="table-header-bg text-white rounded-t-lg">
                            <th class="p-3 rounded-tr-lg">المادة</th>
                            <th class="p-3">المعامل</th>
                            <th class="p-3 rounded-tl-lg">العلامة</th>
                        </tr>
                    </thead>
                    <tbody id="subjects-table-body">
                        <!-- سيتم ملء المواد بواسطة JavaScript -->
                    </tbody>
                    <tfoot>
                        <tr class="bg-gray-100 font-bold">
                            <td class="p-3">المجموع الكلي</td>
                            <td class="p-3" id="total-coefficient">0</td>
                            <td class="p-3" id="total-weighted-mark">0</td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="bg-purple-100 text-purple-800 text-center text-2xl md:text-3xl font-bold p-4 mt-6 rounded-lg shadow-inner">
                المعدل التقديري : <span id="average-display">0.00</span>
            </div>

            <div class="text-center text-gray-500 text-sm mt-4">
                "اجتهد اليوم لتحصد النجاح غداً."
            </div>
        </div>
    </main>

    <!-- تذييل الصفحة (مبسط) -->
    <footer class="bg-gray-800 text-white p-4 text-center text-sm mt-auto rounded-t-lg">
        <p>&copy; 2025 حاسبتي. جميع الحقوق محفوظة.</p>
    </footer>

    <!-- حاوية الإعلانات - ستظهر في الزاوية السفلية اليسرى -->
    <div id="ad-container" class="fixed bottom-4 left-4 w-64 h-48 bg-white shadow-lg rounded-lg overflow-hidden z-50">
        <!-- سيتم حقن إطار الإعلان هنا -->
    </div>

    <script>
        // تعريف مجموعات المواد والمعاملات لكل شعبة
        const branches = {
            "ادبية": [
                { name: "اللغة العربية", coefficient: 5 },
                { name: "اللغة الفرنسية", coefficient: 3 },
                { name: "اللغة الإنجليزية", coefficient: 3 },
                { name: "التاريخ والجغرافيا", coefficient: 4 },
                { name: "الفلسفة", coefficient: 6 },
                { name: "العلوم الإسلامية", coefficient: 2 },
                { name: "الرياضيات", coefficient: 2 },
                { name: "التربية البدنية", coefficient: 1 },
                { name: "اللغة الأمازيغية - (2)", coefficient: 0 } // يمكن للمستخدم تغييرها
            ],
            "علمية": [
                { name: "اللغة العربية", coefficient: 3 },
                { name: "اللغة الفرنسية", coefficient: 2 },
                { name: "اللغة الإنجليزية", coefficient: 2 },
                { name: "الرياضيات", coefficient: 5 },
                { name: "العلوم الطبيعية والحياة", coefficient: 6 },
                { name: "الفيزياء", coefficient: 5 },
                { name: "التاريخ والجغرافيا", coefficient: 2 },
                { name: "التربية الإسلامية", coefficient: 1 },
                { name: "الفلسفة", coefficient: 2 },
                { name: "التربية البدنية", coefficient: 1 }
            ],
            "لغات": [
                { name: "اللغة العربية", coefficient: 5 },
                { name: "اللغة الفرنسية", coefficient: 5 },
                { name: "اللغة الإنجليزية", coefficient: 5 },
                { name: "اللغة الأجنبية 3", coefficient: 4 }, // يمكن تغييرها لتكون لغة محددة
                { name: "التاريخ والجغرافيا", coefficient: 3 },
                { name: "التربية الإسلامية", coefficient: 2 },
                { name: "الفلسفة", coefficient: 2 },
                { name: "الرياضيات", coefficient: 2 },
                { name: "التربية البدنية", coefficient: 1 }
            ],
            "تسيير": [
                { name: "اللغة العربية", coefficient: 3 },
                { name: "اللغة الفرنسية", coefficient: 2 },
                { name: "اللغة الإنجليزية", coefficient: 2 },
                { name: "الرياضيات", coefficient: 5 },
                { name: "الاقتصاد والمناجمنت", coefficient: 5 },
                { name: "القانون", coefficient: 2 },
                { name: "التسيير المحاسبي والمالي", coefficient: 6 },
                { name: "التاريخ والجغرافيا", coefficient: 4 },
                { name: "التربية الإسلامية", coefficient: 2 },
                { name: "الفلسفة", coefficient: 2 },
                { name: "التربية البدنية", coefficient: 1 }
            ],
            "رياضيات": [
                { name: "اللغة العربية", coefficient: 3 },
                { name: "اللغة الفرنسية", coefficient: 2 },
                { name: "اللغة الإنجليزية", coefficient: 2 },
                { name: "الرياضيات", coefficient: 7 },
                { name: "الفيزياء", coefficient: 6 },
                { name: "العلوم الطبيعية والحياة", coefficient: 2 },
                { name: "التاريخ والجغرافيا", coefficient: 2 },
                { name: "التربية الإسلامية", coefficient: 1 },
                { name: "الفلسفة", coefficient: 2 },
                { name: "التربية البدنية", coefficient: 1 }
            ],
            "تقني": [
                { name: "اللغة العربية", coefficient: 3 },
                { name: "اللغة الفرنسية", coefficient: 2 },
                { name: "اللغة الإنجليزية", coefficient: 2 },
                { name: "الرياضيات", coefficient: 6 },
                { name: "الفيزياء", coefficient: 6 },
                { name: "التكنولوجيا", coefficient: 7 }, // مادة التخصص
                { name: "التاريخ والجغرافيا", coefficient: 2 },
                { name: "التربية الإسلامية", coefficient: 1 },
                { name: "الفلسفة", coefficient: 2 },
                { name: "التربية البدنية", coefficient: 1 }
            ]
        };

        let currentSubjects = branches["ادبية"]; // الشعبة الافتراضية عند التحميل

        const subjectsTableBody = document.getElementById('subjects-table-body');
        const totalCoefficientDisplay = document.getElementById('total-coefficient');
        const totalWeightedMarkDisplay = document.getElementById('total-weighted-mark');
        const averageDisplay = document.getElementById('average-display');
        const branchButtons = document.querySelectorAll('.btn-primary'); // تحديد أزرار الشعب

        // دالة لملء الجدول بالمواد وحقول الإدخال
        function populateSubjectsTable() {
            subjectsTableBody.innerHTML = ''; // مسح الصفوف الموجودة
            currentSubjects.forEach((subject, index) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-200 hover:bg-gray-50';
                row.innerHTML = `
                    <td class="p-3 text-right">${subject.name}</td>
                    <td class="p-3">
                        <input type="number" value="${subject.coefficient}" min="0" class="coefficient-input w-16 md:w-20 p-2 border border-gray-300 rounded-md text-center focus:outline-none focus:ring-2 focus:ring-purple-500" data-index="${index}">
                    </td>
                    <td class="p-3">
                        <input type="number" value="0" min="0" max="20" step="0.01" class="mark-input w-20 md:w-24 p-2 border border-gray-300 rounded-md text-center focus:outline-none focus:ring-2 focus:ring-purple-500" data-index="${index}">
                    </td>
                `;
                subjectsTableBody.appendChild(row);
            });

            // إضافة مستمعي الأحداث لحقول الإدخال بعد إنشائها
            document.querySelectorAll('.mark-input, .coefficient-input').forEach(input => {
                input.addEventListener('input', calculateAverage);
            });
            calculateAverage(); // إجراء الحساب الأولي
        }

        // دالة لحساب المعدل
        function calculateAverage() {
            let totalWeightedMarks = 0;
            let totalCoefficients = 0;

            // الحصول على جميع حقول إدخال العلامات والمعاملات
            const markInputs = document.querySelectorAll('.mark-input');
            const coefficientInputs = document.querySelectorAll('.coefficient-input');

            markInputs.forEach((markInput, index) => {
                const mark = parseFloat(markInput.value) || 0;
                const coefficient = parseFloat(coefficientInputs[index].value) || 0;

                // تضمين المواد ذات المعامل غير الصفري فقط في مجموع المعاملات الإجمالي
                // وحساب العلامة الموزونة إذا كان المعامل غير صفري.
                if (coefficient > 0) {
                    totalWeightedMarks += mark * coefficient;
                    totalCoefficients += coefficient;
                }
            });

            // عرض المجاميع
            totalWeightedMarkDisplay.textContent = totalWeightedMarks.toFixed(2);
            totalCoefficientDisplay.textContent = totalCoefficients.toFixed(2);

            // حساب وعرض المعدل
            if (totalCoefficients > 0) {
                const average = totalWeightedMarks / totalCoefficients;
                averageDisplay.textContent = average.toFixed(2);
            } else {
                averageDisplay.textContent = '0.00'; // تجنب القسمة على صفر
            }
        }

        // إضافة مستمعي الأحداث لأزرار الشعب
        branchButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const branchKey = event.target.dataset.branch;
                if (branches[branchKey]) {
                    currentSubjects = branches[branchKey];
                    populateSubjectsTable(); // إعادة ملء الجدول بالمواد الجديدة
                }
            });
        });

        // -------------------------------------------------------------------
        // وظيفة عرض الإعلانات
        // -------------------------------------------------------------------
        const adUrls = [
            "https://www.profitableratecpm.com/arpab0np0?key=7a92e5ee434f47b82d5dd8306dcd5a41",
            "https://www.profitableratecpm.com/s523nse3n?key=1e4b46f52e21bcab45fe2bf83163a6cd",
            "https://www.profitableratecpm.com/zw7fwn3by?key=d1e3cfd0cbf23126e13c623e24c06f34"
        ];
        const adContainer = document.getElementById('ad-container');

        function displayAd() {
            // مسح أي إعلان سابق داخل الحاوية
            adContainer.innerHTML = '';

            // اختيار رابط إعلان عشوائي
            const randomIndex = Math.floor(Math.random() * adUrls.length);
            const adUrl = adUrls[randomIndex];

            // إنشاء عنصر iframe للإعلان
            const iframe = document.createElement('iframe');
            iframe.src = adUrl;
            iframe.width = "100%";
            iframe.height = "100%";
            iframe.frameBorder = "0"; // إزالة الحدود الافتراضية للإطار
            iframe.scrolling = "no"; // منع ظهور أشرطة التمرير داخل الإطار
            // السماح ببعض الميزات لضمان عرض الإعلان بشكل صحيح (مثل التشغيل التلقائي)
            iframe.allow = "autoplay; fullscreen; picture-in-picture";
            // إعدادات sandbox لزيادة الأمان وتقييد ما يمكن للإعلان فعله
            iframe.sandbox = "allow-scripts allow-same-origin allow-popups allow-forms allow-modals";

            // إضافة iframe إلى حاوية الإعلانات
            adContainer.appendChild(iframe);
        }

        // تهيئة الجدول وعرض الإعلان الأولي عند تحميل الصفحة
        window.onload = () => {
            populateSubjectsTable();
            displayAd(); // عرض أول إعلان فورًا
            // بدء عرض إعلان جديد كل دقيقة (60000 مللي ثانية)
            setInterval(displayAd, 60000);
        };
    </script>
</body>
</html>

